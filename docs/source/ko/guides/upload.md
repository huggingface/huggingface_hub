<!--âš ï¸ Note that this file is in Markdown but contains specific syntax for our doc-builder (similar to MDX) that may not be
rendered properly in your Markdown viewer.
-->

# Hubì— íŒŒì¼ ì—…ë¡œë“œí•˜ê¸°[[upload-files-to-the-hub]]

íŒŒì¼ê³¼ ì‘ì—…ë¬¼ì„ ê³µìœ í•˜ëŠ” ê²ƒì€ Hubì˜ ì£¼ìš” íŠ¹ì„± ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. `huggingface_hub`ëŠ” Hubì— íŒŒì¼ì„ ì—…ë¡œë“œí•˜ê¸° ìœ„í•œ ëª‡ ê°€ì§€ ì˜µì…˜ì„ ì œê³µí•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ê¸°ëŠ¥ì„ ë‹¨ë…ìœ¼ë¡œ ì‚¬ìš©í•˜ê±°ë‚˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— í†µí•©í•˜ì—¬ í•´ë‹¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì‚¬ìš©ìê°€ Hubì™€ ë” í¸ë¦¬í•˜ê²Œ ìƒí˜¸ì‘ìš©í•  ìˆ˜ ìˆë„ë¡ ë„ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Hubì— íŒŒì¼ì„ ì—…ë¡œë“œ í•˜ë ¤ë©´ í—ˆê¹…í˜ì´ìŠ¤ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•´ì•¼ í•©ë‹ˆë‹¤. ì¸ì¦ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ [ì´ í˜ì´ì§€](../quick-start#authentication)ë¥¼ ì°¸ì¡°í•´ ì£¼ì„¸ìš”.

## íŒŒì¼ ì—…ë¡œë“œí•˜ê¸°[[upload-a-file]]

[`create_repo`]ë¡œ ë¦¬í¬ì§€í† ë¦¬ë¥¼ ìƒì„±í–ˆë‹¤ë©´, [`upload_file`]ì„ ì‚¬ìš©í•˜ì—¬ í•´ë‹¹ ë¦¬í¬ì§€í† ë¦¬ì— íŒŒì¼ì„ ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì—…ë¡œë“œí•  íŒŒì¼ì˜ ë³¸ ê²½ë¡œ, ë¦¬í¬ì§€í† ë¦¬ì—ì„œ íŒŒì¼ì„ ì—…ë¡œë“œí•  ìœ„ì¹˜, ëŒ€ìƒ ë¦¬í¬ì§€í† ë¦¬ì˜ ì´ë¦„ì„ ì§€ì •í•©ë‹ˆë‹¤. ë¦¬í¬ì§€í† ë¦¬ì˜ ìœ í˜•ì„ `dataset`, `model`, `space`ë¡œ ì„ íƒì ìœ¼ë¡œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


```py
>>> from huggingface_hub import HfApi
>>> api = HfApi()
>>> api.upload_file(
...     path_or_fileobj="/path/to/local/folder/README.md",
...     path_in_repo="README.md",
...     repo_id="username/test-dataset",
...     repo_type="dataset",
... )
```

## í´ë” ì—…ë¡œë“œ[[upload-a-folder]]

ë¡œì»¬ í´ë”ë¥¼ ë¦¬í¬ì§€í† ë¦¬ì— ì—…ë¡œë“œí•˜ë ¤ë©´ [`upload_folder`] í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
ì—…ë¡œë“œí•  ë¡œì»¬ í´ë”ì˜ ë³¸ ê²½ë¡œ, ë¦¬í¬ì§€í† ë¦¬ì—ì„œ í´ë”ë¥¼ ì—…ë¡œë“œí•  ìœ„ì¹˜, ëŒ€ìƒ ë¦¬í¬ì§€í† ë¦¬ì˜ ì´ë¦„ì„ ì§€ì •í•©ë‹ˆë‹¤. ë¦¬í¬ì§€í† ë¦¬ì˜ ìœ í˜•ì„ `dataset`, `model`, `space`ë¡œ ì„ íƒì ìœ¼ë¡œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```py
>>> from huggingface_hub import HfApi
>>> api = HfApi()

# ë¡œì»¬ í´ë”ì— ìˆëŠ” ëª¨ë“  ì½˜í…ì¸ ë¥¼ ì›ê²© Spaceì— ì—…ë¡œë“œ í•©ë‹ˆë‹¤.
# íŒŒì¼ì€ ê¸°ë³¸ì ìœ¼ë¡œ ë¦¬í¬ì§€í† ë¦¬ì˜ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì— ì—…ë¡œë“œ ë©ë‹ˆë‹¤.
>>> api.upload_folder(
...     folder_path="/path/to/local/space",
...     repo_id="username/my-cool-space",
...     repo_type="space",
... )
```

ê¸°ë³¸ì ìœ¼ë¡œ ì–´ë–¤ íŒŒì¼ì„ ì»¤ë°‹í• ì§€ ì—¬ë¶€ë¥¼ ì•Œê¸° ìœ„í•´ `.gitignore` íŒŒì¼ì„ ì°¸ì¡°í•˜ê²Œ ë©ë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ ì»¤ë°‹ì— `.gitignore` íŒŒì¼ì´ ìˆëŠ”ì§€ í™•ì¸í•˜ê³ , ì—†ëŠ” ê²½ìš° Hubì— íŒŒì¼ì´ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. ë””ë ‰í„°ë¦¬ì˜ ë£¨íŠ¸ ê²½ë¡œì— ìˆëŠ” `.gitignore` íŒŒì¼ë§Œ ì‚¬ìš©ëœë‹¤ëŠ” ì ì„ ì£¼ì˜í•˜ì„¸ìš”. í•˜ìœ„ ê²½ë¡œì—ëŠ” `.gitignore` íŒŒì¼ì´ ìˆëŠ”ì§€ í™•ì¸í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

í•˜ë“œì½”ë”©ëœ `.gitignore` íŒŒì¼ì„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë ¤ë©´ `allow_patterns` ì™€ `ignore_patterns` ì¸ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì—…ë¡œë“œí•  íŒŒì¼ì„ í•„í„°ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ë§¤ê°œë³€ìˆ˜ë“¤ì€ ë‹¨ì¼ íŒ¨í„´ ë˜ëŠ” íŒ¨í„´ ë¦¬ìŠ¤íŠ¸ë¥¼ í—ˆìš©í•©ë‹ˆë‹¤. íŒ¨í„´ì˜ í˜•ì‹ì€ [ì´ ë¬¸ì„œ](https://tldp.org/LDP/GNU-Linux-Tools-Summary/html/x11655.htm)ì— ì„¤ëª…ëœ ëŒ€ë¡œ í‘œì¤€ ì™€ì¼ë“œì¹´ë“œ(ê¸€ë¡œë¹™ íŒ¨í„´)ì…ë‹ˆë‹¤. `allow_patterns`ê³¼ `ignore_patterns`ì„ ëª¨ë‘ ì‚¬ìš©í•˜ë©´ ë‘ ê°€ì§€ ì„¤ì •ì´ ëª¨ë‘ ì ìš©ë©ë‹ˆë‹¤.

`.gitignore` íŒŒì¼ê³¼ allow/ignore íŒ¨í„´ ì™¸ì— í•˜ìœ„ ê²½ë¡œ ìˆëŠ” ëª¨ë“  `.git/` í´ë”ëŠ” ë¬´ì‹œë©ë‹ˆë‹¤.

```py
>>> api.upload_folder(
...     folder_path="/path/to/local/folder",
...     path_in_repo="my-dataset/train", # íŠ¹ì • í´ë”ì— ì—…ë¡œë“œ
...     repo_id="username/test-dataset",
...     repo_type="dataset",
...     ignore_patterns="**/logs/*.txt", # ëª¨ë“  ë¡œê·¸ í…ìŠ¤íŠ¸ íŒŒì¼ì„ ë¬´ì‹œ
... )
```

`delete_patterns` ì¸ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë™ì¼í•œ ì»¤ë°‹ì—ì„œ ë¦¬í¬ì§€í† ë¦¬ì—ì„œ ì‚­ì œí•  íŒŒì¼ì„ ì§€ì •í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
ì´ ë°©ë²•ì€ íŒŒì¼ì„ í‘¸ì‹œí•˜ê¸° ì „ì— ì›ê²© í´ë”ë¥¼ ì •ë¦¬í•˜ê³  ì‹¶ì€ë° ì–´ë–¤ íŒŒì¼ì´ ì´ë¯¸ ì¡´ì¬í•˜ëŠ”ì§€ ëª¨ë¥´ëŠ” ê²½ìš°ì— ìœ ìš©í•©ë‹ˆë‹¤.

ë‹¤ìŒì€ ë¡œì»¬ `./logs` í´ë”ë¥¼ ì›ê²© `/experiment/logs/` í´ë”ì— ì—…ë¡œë“œí•˜ëŠ” ì˜ˆì‹œì…ë‹ˆë‹¤.
í´ë” ë‚´ì˜ txt íŒŒì¼ë§Œì„ ì—…ë¡œë“œ í•˜ê²Œ ë˜ë©° ê·¸ ì „ì— ë¦¬í¬ì§€í† ë¦¬ì— ìˆë˜ ëª¨ë“  ì´ì „ txt íŒŒì¼ì´ ì‚­ì œë©ë‹ˆë‹¤. ì´ ëª¨ë“  ê³¼ì •ì´ ë‹¨ í•œ ë²ˆì˜ ì»¤ë°‹ìœ¼ë¡œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.
```py
>>> api.upload_folder(
...     folder_path="/path/to/local/folder/logs",
...     repo_id="username/trained-model",
...     path_in_repo="experiment/logs/",
...     allow_patterns="*.txt", # ëª¨ë“  ë¡œì»¬ í…ìŠ¤íŠ¸ íŒŒì¼ì„ ì—…ë¡œë“œ
...     delete_patterns="*.txt", # ëª¨ë“  ì´ì „ í…ìŠ¤íŠ¸ íŒŒì¼ì„ ì‚­ì œ
... )
```

## CLIì—ì„œ ì—…ë¡œë“œ[[upload-from-the-cli]]

í„°ë¯¸ë„ì—ì„œ `hf upload` ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ Hubì— íŒŒì¼ì„ ì§ì ‘ ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‚´ë¶€ì ìœ¼ë¡œëŠ” ìœ„ì—ì„œ ì„¤ëª…í•œ ê²ƒê³¼ ë™ì¼í•œ [`upload_file`] ì™€ [`upload_folder`] í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

ë‹¤ìŒê³¼ ê°™ì´ ë‹¨ì¼ íŒŒì¼ ë˜ëŠ” ì „ì²´ í´ë”ë¥¼ ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```bash
# ì‚¬ìš©ë¡€:  hf upload [repo_id] [local_path] [path_in_repo]
>>> hf upload Wauplin/my-cool-model ./models/model.safetensors model.safetensors
https://huggingface.co/Wauplin/my-cool-model/blob/main/model.safetensors

>>> hf upload Wauplin/my-cool-model ./models .
https://huggingface.co/Wauplin/my-cool-model/tree/main
```

`local_path` ì™€ `path_in_repo`ëŠ” ì„ íƒ ì‚¬í•­ì´ë©° ì£¼ì–´ì§€ì§€ ì•Šì„ ì‹œ ì„ì˜ë¡œ ì¶”ì •ë©ë‹ˆë‹¤.
`local_path`ê°€ ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ìš°, ì´ íˆ´ì€ ë¡œì»¬ í´ë”ë‚˜ íŒŒì¼ì— `repo_id`ì™€ ê°™ì€ ì´ë¦„ì´ ìˆëŠ”ì§€ í™•ì¸í•˜ë©°, ë°œê²¬ëœ ê²½ìš° í•´ë‹¹ í´ë”ë‚˜ íŒŒì¼ì´ ì—…ë¡œë“œë©ë‹ˆë‹¤.
ê°™ì€ ì´ë¦„ì˜ í´ë”ë‚˜ íŒŒì¼ì„ ì°¾ì§€ ëª»í•œë‹¤ë©´ ì‚¬ìš©ìì—ê²Œ `local_path`ë¥¼ ëª…ì‹œí•˜ë„ë¡ ìš”ì²­í•˜ëŠ” ì˜ˆì™¸ ì²˜ë¦¬ê°€ ë°œìƒí•©ë‹ˆë‹¤.
ì–´ë–¤ ê²½ìš°ë“  `path_in_repo`ê°€ ì„¤ì •ë˜ì–´ ìˆì§€ ì•Šìœ¼ë©´ íŒŒì¼ì´ ë¦¬í¬ì§€í† ë¦¬ì˜ ë£¨íŠ¸ ë””ë ‰í„°ë¦¬ì— ì—…ë¡œë“œë©ë‹ˆë‹¤.

CLI ì—…ë¡œë“œ ëª…ë ¹ì–´ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ [CLI ê°€ì´ë“œ](./cli#hf-upload)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

## ê³ ê¸‰ ê¸°ëŠ¥[[advanced-features]]

ëŒ€ë¶€ë¶„ì˜ ê²½ìš°, Hubì— íŒŒì¼ì„ ì—…ë¡œë“œí•˜ëŠ” ë° [`upload_file`]ê³¼ [`upload_folder`] ì´ìƒì´ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
í•˜ì§€ë§Œ `huggingface_hub`ì—ëŠ” ì‘ì—…ì„ ë” ì‰½ê²Œ í•  ìˆ˜ ìˆëŠ” ê³ ê¸‰ ê¸°ëŠ¥ì´ ìˆìŠµë‹ˆë‹¤. ê·¸ ê¸°ëŠ¥ë“¤ì„ ì‚´í´ë´…ì‹œë‹¤!


### ë…¼ë¸”ë¡œí‚¹ ì—…ë¡œë“œ[[non-blocking-uploads]]

ë©”ì¸ ìŠ¤ë ˆë“œë¥¼ ë©ˆì¶”ì§€ ì•Šê³  ë°ì´í„°ë¥¼ í‘¸ì‹œí•˜ê³  ì‹¶ì€ ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤.
ì´ëŠ” ëª¨ë¸ í•™ìŠµì„ ê³„ì† ì§„í–‰í•˜ë©´ì„œ ë¡œê·¸ì™€ ì•„í‹°íŒ©íŠ¸ë¥¼ ì—…ë¡œë“œí•  ë•Œ íŠ¹íˆ ìœ ìš©í•©ë‹ˆë‹¤.
ì´ë ‡ê²Œ í•˜ë ¤ë©´ [`upload_file`]ê³¼ [[`upload_folder`] ì— `run_as_future` ì¸ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê³  [`concurrent.futures.Future`](https://docs.python.org/3/library/concurrent.futures.html#future-objects)ê°ì²´ë¥¼ ë°˜í™˜ë°›ì•„ ì—…ë¡œë“œ ìƒíƒœë¥¼ í™•ì¸í•˜ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```py
>>> from huggingface_hub import HfApi
>>> api = HfApi()
>>> future = api.upload_folder( # ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì—…ë¡œë“œ ì‘ì—… ìˆ˜í–‰ (ë…¼ë¸”ë¡œí‚¹)
...     repo_id="username/my-model",
...     folder_path="checkpoints-001",
...     run_as_future=True,
... )
>>> future
Future(...)
>>> future.done()
False
>>> future.result() # ì—…ë¡œë“œê°€ ì™„ë£Œë  ë•Œê¹Œì§€ ëŒ€ê¸° (ë¸”ë¡œí‚¹)
...
```

> [!TIP]
> `run_as_future=True`ë¥¼ ì‚¬ìš©í•˜ë©´ ë°±ê·¸ë¼ìš´ë“œ ì‘ì—…ì´ íì— ëŒ€ê¸°ë©ë‹ˆë‹¤. ì´ëŠ” ì‘ì—…ì´ ì˜¬ë°”ë¥¸ ìˆœì„œë¡œ ì‹¤í–‰ëœë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

ë°±ê·¸ë¼ìš´ë“œ ì‘ì—…ì€ ì£¼ë¡œ ë°ì´í„°ë¥¼ ì—…ë¡œë“œí•˜ê±°ë‚˜ ì»¤ë°‹ì„ ìƒì„±í•˜ëŠ” ë° ìœ ìš©í•˜ì§€ë§Œ, ì´ ì™¸ì—ë„ [`run_as_future`]ë¥¼ ì‚¬ìš©í•˜ì—¬ ì›í•˜ëŠ” ë©”ì†Œë“œë¥¼ ëŒ€ê¸°ì—´ì— ë„£ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì˜ˆë¥¼ ë“¤ì–´, í•´ë‹¹ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì—¬ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ë¦¬í¬ì§€í† ë¦¬ë¥¼ ë§Œë“  ë‹¤ìŒ ê·¸ëŒ€ë¡œ ë°ì´í„°ë¥¼ ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì—…ë¡œë“œ ë©”ì†Œë“œì— ë‚´ì¥ëœ `run_as_future` ì¸ìˆ˜ëŠ” ë³¸ ê¸°ëŠ¥ì˜ ë³„ì¹­ì…ë‹ˆë‹¤.

```py
>>> from huggingface_hub import HfApi
>>> api = HfApi()
>>> api.run_as_future(api.create_repo, "username/my-model", exists_ok=True)
Future(...)
>>> api.upload_file(
...     repo_id="username/my-model",
...     path_in_repo="file.txt",
...     path_or_fileobj=b"file content",
...     run_as_future=True,
... )
Future(...)
```

### ì²­í¬ ë‹¨ìœ„ë¡œ í´ë” ì—…ë¡œë“œí•˜ê¸°[[upload-a-folder-by-chunks]]

[`upload_folder`]ë¥¼ ì‚¬ìš©í•˜ë©´ ì „ì²´ í´ë”ë¥¼ Hubì— ì‰½ê²Œ ì—…ë¡œë“œí•  ìˆ˜ ìˆì§€ë§Œ, ëŒ€ìš©ëŸ‰ í´ë”(ìˆ˜ì²œ ê°œì˜ íŒŒì¼ ë˜ëŠ” ìˆ˜ë°± GBì˜ ìš©ëŸ‰)ì˜ ê²½ìš° ë¬¸ì œê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
íŒŒì¼ì´ ë§ì€ í´ë”ê°€ ìˆëŠ” ê²½ìš° ì—¬ëŸ¬ ì»¤ë°‹ì— ê±¸ì³ ì—…ë¡œë“œí•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.
ì—…ë¡œë“œ ì¤‘ì— ì˜¤ë¥˜ë‚˜ ì—°ê²° ë¬¸ì œê°€ ë°œìƒí•´ë„ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘í•  í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤.

ì—¬ëŸ¬ ì»¤ë°‹ìœ¼ë¡œ í´ë”ë¥¼ ì—…ë¡œë“œí•˜ë ¤ë©´ `multi_commits=True`ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬í•˜ë©´ ë©ë‹ˆë‹¤.
ë‚´ë¶€ì ìœ¼ë¡œ `huggingface_hub`ëŠ” ì—…ë¡œë“œ/ì‚­ì œí•  íŒŒì¼ì„ ë‚˜ì—´í•˜ê³  ì—¬ëŸ¬ ì»¤ë°‹ìœ¼ë¡œ ë¶„í• í•©ë‹ˆë‹¤.
ì»¤ë°‹ì„ ë¶„í• í•˜ëŠ” ì „ëµì€ ì—…ë¡œë“œí•  íŒŒì¼ì˜ ìˆ˜ì™€ í¬ê¸°ì— ë”°ë¼ ê²°ì •ë©ë‹ˆë‹¤.
ëª¨ë“  ì»¤ë°‹ì„ í‘¸ì‹œí•˜ê¸° ìœ„í•´ Hubì— PRì´ ì—´ë¦¬ê²Œ ë˜ë©°, PRì´ ì¤€ë¹„ë˜ë©´ ì—¬ëŸ¬ ì»¤ë°‹ì´ ë‹¨ì¼ ì»¤ë°‹ìœ¼ë¡œ ë­‰ì³ì§‘ë‹ˆë‹¤.
ì™„ë£Œí•˜ê¸° ì „ì— í”„ë¡œì„¸ìŠ¤ê°€ ì¤‘ë‹¨ëœ ê²½ìš° ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•˜ì—¬ ì—…ë¡œë“œë¥¼ ì¬ê°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìƒì„±ëœ PRì´ ìë™ìœ¼ë¡œ ê°ì§€ë˜ê³  ì—…ë¡œë“œê°€ ì¤‘ë‹¨ëœ ì§€ì ë¶€í„° ì—…ë¡œë“œê°€ ì¬ê°œë©ë‹ˆë‹¤.
ì—…ë¡œë“œ ì§„í–‰ ìƒí™©ì„ ë” ì˜ ì´í•´í•˜ê³  ì‹¶ë‹¤ë©´ `multi_commits_verbose=True`ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬í•˜ë©´ ë©ë‹ˆë‹¤.

ë‹¤ìŒì€ ì—¬ëŸ¬ ì»¤ë°‹ìœ¼ë¡œ ì²´í¬í¬ì¸íŠ¸ í´ë”ë¥¼ ë°ì´í„°ì…‹ì— ì—…ë¡œë“œí•˜ëŠ” ì˜ˆì œì…ë‹ˆë‹¤.
Hubì— PRì´ ìƒì„±ë˜ê³  ì—…ë¡œë“œê°€ ì™„ë£Œë˜ë©´ ìë™ìœ¼ë¡œ ë³‘í•©ë©ë‹ˆë‹¤.
PRì„ ê³„ì† ì—´ì–´ë‘ê³  ìˆ˜ë™ìœ¼ë¡œ ê²€í† í•˜ë ¤ë©´ `create_pr=True`ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬í•˜ë©´ ë©ë‹ˆë‹¤.

```py
>>> upload_folder(
...     folder_path="local/checkpoints",
...     repo_id="username/my-dataset",
...     repo_type="dataset",
...     multi_commits=True,
...     multi_commits_verbose=True,
... )
```

ì—…ë¡œë“œ ì „ëµ(ì¦‰, ìƒì„±ë˜ëŠ” ì»¤ë°‹)ì„ ë” ì˜ ì œì–´í•˜ê³  ì‹¶ìœ¼ë©´ ë¡œìš° ë ˆë²¨ì˜ [`plan_multi_commits`] ì™€ [`create_commits_on_pr`] ë©”ì„œë“œë¥¼ ì‚´í´ë³´ì„¸ìš”.

> [!WARNING]
> `multi_commits`ì€ ì•„ì§ ì‹¤í—˜ì ì¸ ê¸°ëŠ¥ì…ë‹ˆë‹¤.
> í•´ë‹¹ APIì™€ ë™ì‘ì€ í–¥í›„ ì‚¬ì „ ê³ ì§€ ì—†ì´ ë³€ê²½ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ì˜ˆì•½ëœ ì—…ë¡œë“œ[[scheduled-uploads]]

í—ˆê¹… í˜ì´ìŠ¤ Hubë¥¼ ì‚¬ìš©í•˜ë©´ ë°ì´í„°ë¥¼ ì‰½ê²Œ ì €ì¥í•˜ê³  ë²„ì „ì—…í•  ìˆ˜ ìˆì§€ë§Œ, ë™ì¼í•œ íŒŒì¼ì„ ìˆ˜ì²œ ë²ˆ ì—…ë°ì´íŠ¸í•  ë•ŒëŠ” ëª‡ ê°€ì§€ ì œí•œì´ ìˆìŠµë‹ˆë‹¤.
ì˜ˆë¥¼ ë“¤ì–´, ë°°í¬ëœ Spaceì— ëŒ€í•œ êµìœ¡ í”„ë¡œì„¸ìŠ¤ ë˜ëŠ” ì‚¬ìš©ì ë¡œê·¸ë¥¼ ì €ì¥í•˜ê³  ì‹¶ì„ ë•Œ Hubì— ë°ì´í„° ì§‘í•©ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì—…ë¡œë“œí•˜ëŠ” ê²ƒì´ ì¢‹ì•„ ë³´ì´ì§€ë§Œ, ì´ë¥¼ ì œëŒ€ë¡œ í•˜ê¸° ì–´ë ¤ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ë°ì´í„°ì˜ ëª¨ë“  ì—…ë°ì´íŠ¸ë¥¼ ë²„ì „ìœ¼ë¡œ ë§Œë“¤ê²Œ ë˜ë©´ git ë¦¬í¬ì§€í† ë¦¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ìƒíƒœë¡œ ë§Œë“¤ì–´ ë²„ë¦¬ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
[`CommitScheduler`] í´ë˜ìŠ¤ëŠ” ì´ ë¬¸ì œì— ëŒ€í•œ í•´ê²°ì±…ì„ ì œê³µí•©ë‹ˆë‹¤.

ì´ í´ë˜ìŠ¤ëŠ” ë¡œì»¬ í´ë”ë¥¼ Hubì— ì •ê¸°ì ìœ¼ë¡œ í‘¸ì‹œí•˜ëŠ” ë°±ê·¸ë¼ìš´ë“œ ì‘ì—…ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.
ì¼ë¶€ í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥ìœ¼ë¡œ ë°›ì•„ ë‘ ê°œì˜ ë²ˆì—­ì„ ìƒì„±í•œ ë‹¤ìŒ, ì‚¬ìš©ìê°€ ì„ í˜¸í•˜ëŠ” ë²ˆì—­ì„ ì„ íƒí•  ìˆ˜ ìˆëŠ” ë¼ë””ì˜¤ ìŠ¤í˜ì´ìŠ¤ê°€ ìˆë‹¤ê³  ê°€ì •í•´ ë³´ê² ìŠµë‹ˆë‹¤.
ì´ ìŠ¤í˜ì´ìŠ¤ì˜ ê° ì‹¤í–‰ì— ëŒ€í•´ ì…ë ¥, ì¶œë ¥ ë° ì‚¬ìš©ì ê¸°ë³¸ ì„¤ì •ì„ ì €ì¥í•˜ì—¬ ê²°ê³¼ë¥¼ ë¶„ì„í•˜ë ¤ê³  í•˜ëŠ”ë°, ì´ê²ƒì€ [`CommitScheduler`]ì˜ ì™„ë²½í•œ ì‚¬ìš© ì‚¬ë¡€ê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
Hubì— ë°ì´í„°(ì ì¬ì ìœ¼ë¡œ ìˆ˜ë°±ë§Œ ê°œì˜ ì‚¬ìš©ì í”¼ë“œë°±)ë¥¼ ì €ì¥í•˜ê³  ì‹¶ì§€ë§Œ, êµ³ì´ ê° ì‚¬ìš©ìì˜ ì…ë ¥ì„ _ì‹¤ì‹œê°„_ ìœ¼ë¡œ ì €ì¥í•  í•„ìš”ëŠ” ì—†ìœ¼ë‹ˆ ë°ì´í„°ë¥¼ ë¡œì»¬ JSON íŒŒì¼ì— ì €ì¥í•œ ë‹¤ìŒ 10ë¶„ë§ˆë‹¤ ì—…ë¡œë“œí•˜ë©´ ë©ë‹ˆë‹¤.
ì˜ˆì œ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

```py
>>> import json
>>> import uuid
>>> from pathlib import Path
>>> import gradio as gr
>>> from huggingface_hub import CommitScheduler

# ë°ì´í„°ë¥¼ ì €ì¥í•  íŒŒì¼ì„ ì„ ì–¸í•©ë‹ˆë‹¤. UUIDë¥¼ ì´ìš©í•˜ì—¬ ì¤‘ë³µì„ ë°©ì§€í•©ë‹ˆë‹¤.
>>> feedback_file = Path("user_feedback/") / f"data_{uuid.uuid4()}.json"
>>> feedback_folder = feedback_file.parent

# ì •ê¸° ì—…ë¡œë“œë¥¼ ì˜ˆì•½í•©ë‹ˆë‹¤. ì›ê²© ë¦¬í¬ì§€í† ë¦¬ì™€ ë¡œì»¬ í´ë”ê°€ ì—†ì„ì‹œ ìƒì„±í•©ë‹ˆë‹¤.
>>> scheduler = CommitScheduler(
...     repo_id="report-translation-feedback",
...     repo_type="dataset",
...     folder_path=feedback_folder,
...     path_in_repo="data",
...     every=10,
... )

# ì‚¬ìš©ìê°€ í”¼ë“œë°±ì„ ì œì¶œí•  ë•Œ í˜¸ì¶œë°›ì„ í•¨ìˆ˜ë¥¼ ì •ì˜í•©ë‹ˆë‹¤. (Gradio ì•ˆì—ì„œ í˜¸ì¶œë°›ê²Œ ë©ë‹ˆë‹¤)
>>> def save_feedback(input_text:str, output_1: str, output_2:str, user_choice: int) -> None:
...     """
...     JSON Lines íŒŒì¼ì— ì…/ì¶œë ¥ê³¼ ì‚¬ìš©ì í”¼ë“œë°±ì„ ì¶”ê°€í•©ë‹ˆë‹¤. íƒ€ ì‚¬ìš©ìì— ì˜í•œ ë™ì‹œì ì¸ ì“°ê¸°ë¥¼ ì§€ì–‘í•˜ê¸° ìœ„í•´ ìŠ¤ë ˆë“œ ë½ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
...     """
...     with scheduler.lock:
...         with feedback_file.open("a") as f:
...             f.write(json.dumps({"input": input_text, "output_1": output_1, "output_2": output_2, "user_choice": user_choice}))
...             f.write("\n")

# Gradioë¥¼ ì‹œì‘í•©ë‹ˆë‹¤.
>>> with gr.Blocks() as demo:
>>>     ... # Gradio ë°ëª¨ë¥¼ ì •ì˜í•˜ê³  `save_feedback`ì„ ì‚¬ìš©í•©ë‹ˆë‹¤
>>> demo.launch()
```

ì‚¬ìš©ì ì…ë ¥/ì¶œë ¥ ë° í”¼ë“œë°±ì€ Hubì—ì„œ ë°ì´í„° ì„¸íŠ¸ì˜ í˜•íƒœë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ê³ ìœ í•œ JSON íŒŒì¼ ì´ë¦„ì„ ì‚¬ìš©í•˜ë©´ ì´ì „ ì‹¤í–‰ì´ë‚˜ ë‹¤ë¥¸ ìŠ¤í˜ì´ìŠ¤/ë³µì œë³¸ì´ ë™ì¼í•œ ë¦¬í¬ì§€í† ë¦¬ì— ë™ì‹œì— í‘¸ì‹œí•˜ëŠ” ê²½ìš°ì˜ ë°ì´í„°ë¥¼ ë®ì–´ì“°ì§€ ì•Šë„ë¡ ë³´ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

[`CommitScheduler`]ì— ëŒ€í•œ ìƒì„¸ ì‚¬í•­ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:
- **ì¶”ê°€ ì „ìš©:**
    ìŠ¤ì¼€ì¤„ëŸ¬ëŠ” í´ë”ì— ì½˜í…ì¸ ë¥¼ ì¶”ê°€ë§Œ í•œë‹¤ê³  ê°€ì •í•©ë‹ˆë‹¤. ê¸°ì¡´ íŒŒì¼ì— ë°ì´í„°ë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ìƒˆ íŒŒì¼ì„ ë§Œë“¤ ë•Œë§Œ ì‚¬ìš©í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.
    íŒŒì¼ì„ ì‚­ì œí•˜ê±°ë‚˜ ë®ì–´ì“°ë©´ ë¦¬í¬ì§€í† ë¦¬ê°€ ì†ìƒë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **git íˆìŠ¤í† ë¦¬**:
    ê¸°ë³¸ì ìœ¼ë¡œ ìŠ¤ì¼€ì¤„ëŸ¬ëŠ” `ë§¤ ë¶„ë§ˆë‹¤`  í´ë”ë¥¼ ì»¤ë°‹í•©ë‹ˆë‹¤.
    git ë¦¬í¬ì§€í† ë¦¬ë¥¼ ë„ˆë¬´ ë§ì´ ì˜¤ì—¼ì‹œí‚¤ì§€ ì•Šìœ¼ë ¤ë©´ ìµœì†Œê°’ì„ 5ë¶„ìœ¼ë¡œ ì„¤ì •í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.
    ë˜í•œ ìŠ¤ì¼€ì¤„ëŸ¬ëŠ” ë¹ˆ ì»¤ë°‹ì„ í”¼í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆëŠ”ë°, ë§Œì•½ í´ë”ì—ì„œ ìƒˆ ì½˜í…ì¸ ê°€ ê°ì§€ë˜ì§€ ì•Šìœ¼ë©´ ì˜ˆì•½ëœ ì»¤ë°‹ì„ ì‚­ì œí•©ë‹ˆë‹¤.
- **ì—ëŸ¬:**
    ìŠ¤ì¼€ì¤„ëŸ¬ëŠ” ë°±ê·¸ë¼ìš´ë“œ ìŠ¤ë ˆë“œë¡œ ì‹¤í–‰ë˜ê³ , ì´ëŠ” í´ë˜ìŠ¤ë¥¼ ì¸ìŠ¤í„´ìŠ¤í™”í•  ë•Œ ì‹œì‘ë˜ë©° ì ˆëŒ€ ë©ˆì¶”ì§€ ì•ŠìŠµë‹ˆë‹¤.
    ë§Œì•½ ì—…ë¡œë“œ ì¤‘ì— ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´(ì˜ˆ: ì—°ê²° ë¬¸ì œ), ìŠ¤ì¼€ì¤„ëŸ¬ëŠ” ì´ë¥¼ ì•„ë¬´ ë§ ì—†ì´ ë¬´ì‹œí•˜ê³  ë‹¤ìŒ ì˜ˆì•½ëœ ì»¤ë°‹ì—ì„œ ì¬ì‹œë„ í•©ë‹ˆë‹¤.
- **ìŠ¤ë ˆë“œ ì•ˆì „:**
    ëŒ€ë¶€ë¶„ì˜ ê²½ìš° íŒŒì¼ ë½ì— ëŒ€í•´ ê±±ì •í•  í•„ìš” ì—†ì´ íŒŒì¼ì— ì“°ê¸° ì‘ì—…ì„ ìˆ˜í–‰ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    ìŠ¤ì¼€ì¤„ëŸ¬ëŠ” ì—…ë¡œë“œí•˜ëŠ” ë™ì•ˆ ëŒ€ìƒ í´ë”ì— ì½˜í…ì¸ ë¥¼ ì“°ë”ë¼ë„ ì¶©ëŒí•˜ê±°ë‚˜ ì†ìƒë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
    ê·¸ëŸ¬ë‚˜, ë¶€í•˜ê°€ ë§ì€ ì•±ì˜ ê²½ìš° ì´ëŸ° ì‘ì—…ì—ì„œ _ë™ì‹œì„± ë¬¸ì œ_ ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    ì´ ê²½ìš°, `scheduler.lock`ì„ ì‚¬ìš©í•˜ì—¬ ìŠ¤ë ˆë“œ ì•ˆì „ì„ ë³´ì¥í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.
    ì´ ë½ì€ ìŠ¤ì¼€ì¤„ëŸ¬ê°€ í´ë”ì—ì„œ ë³€ê²½ ì‚¬í•­ì„ ê²€ìƒ‰í•  ë•Œë§Œ ì°¨ë‹¨ë˜ë©°, ë°ì´í„°ë¥¼ ì—…ë¡œë“œí•  ë•ŒëŠ” ì°¨ë‹¨ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
    ë”°ë¼ì„œ Spaceì˜ ì‚¬ìš©ì í™˜ê²½ì—ëŠ” ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

#### ìŠ¤í˜ì´ìŠ¤ ì§€ì†ì„± ë°ëª¨[[space-persistence-demo]]

ìŠ¤í˜ì´ìŠ¤ì—ì„œ Hubì˜ ë°ì´í„°ì…‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì˜ì†í•˜ëŠ” ê²ƒì´ [`CommitScheduler`]ì˜ ì£¼ìš” ì‚¬ìš© ì‚¬ë¡€ì…ë‹ˆë‹¤.
ê° ì‚¬ìš© ì‚¬ë¡€ì— ë”°ë¼ ë°ì´í„° êµ¬ì¡°ë¥¼ ë‹¤ë¥´ê²Œ ì„¤ì •í•´ì•¼ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
ë°ì´í„° êµ¬ì¡°ëŠ” ë™ì‹œ ì‚¬ìš©ìì™€ ì¬ì‹œì‘ì— ëŒ€í•´ ê²¬ê³ í•´ì•¼ í•˜ë©°, ì´ëŠ” ëŒ€ê°œ UUIDë¥¼ ìƒì„± í•´ì•¼ í•¨ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. 
ê²¬ê³ í•¨ ë¿ë§Œ ì•„ë‹ˆë¼, ì¬ì‚¬ìš©ì„±ì„ ìœ„í•´ ğŸ¤— ë°ì´í„° ì„¸íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì½ì„ ìˆ˜ ìˆëŠ” í˜•ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì—…ë¡œë“œí•´ì•¼ í•©ë‹ˆë‹¤.
ì´ [ìŠ¤í˜ì´ìŠ¤](https://huggingface.co/spaces/Wauplin/space_to_dataset_saver)
ì˜ˆì œì—ì„œ ì—¬ëŸ¬ ê°€ì§€ ë°ì´í„° í˜•ì‹ì„ ì €ì¥í•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ì¤ë‹ˆë‹¤(ê°ìì˜ í•„ìš”ì— ë§ê²Œ ì¡°ì •í•´ì•¼ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤).

#### ì‚¬ìš©ì ì§€ì • ì—…ë¡œë“œ[[custom-uploads]]

[`CommitScheduler`]ëŠ” ë°ì´í„°ê°€ ì¶”ê°€ ì „ìš©ì´ë©° "ìˆëŠ” ê·¸ëŒ€ë¡œ" ì—…ë¡œë“œí•´ì•¼ í•œë‹¤ê³  ê°€ì •í•©ë‹ˆë‹¤.
ê·¸ëŸ¬ë‚˜ ë°ì´í„° ì—…ë¡œë“œ ë°©ì‹ì„ ì‚¬ìš©ì ìŠ¤ìŠ¤ë¡œ ì •ì˜í•˜ê³  ì‹¶ì„ ë•Œë„ ìˆëŠ”ë°, [`CommitScheduler`]ë¥¼ ìƒì†ë°›ëŠ” í´ë˜ìŠ¤ë¥¼ ìƒì„±í•˜ê³  `push_to_hub` ë©”ì„œë“œë¥¼ ë®ì–´ì“°ë©´ ë©ë‹ˆë‹¤(ì›í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ììœ ë¡­ê²Œ ë®ì–´ì“°ì„¸ìš”).
ì´ë ‡ê²Œ í•˜ë©´ í•´ë‹¹ í´ë˜ìŠ¤ê°€ ë°±ê·¸ë¼ìš´ë“œ ìŠ¤ë ˆë“œì—ì„œ `ë§¤ ë¶„ë§ˆë‹¤` í˜¸ì¶œë©ë‹ˆë‹¤.
ë™ì‹œì„± ë° ì˜¤ë¥˜ì— ëŒ€í•´ ê±±ì •í•  í•„ìš”ëŠ” ì—†ì§€ë§Œ ë¹ˆ ì»¤ë°‹ì´ë‚˜ ì¤‘ë³µëœ ë°ì´í„°ë¥¼ í‘¸ì‹œí•˜ëŠ” ê²ƒê³¼ ê°™ì€ ì¼€ì´ìŠ¤ë“¤ì— ì£¼ì˜í•´ì•¼ í•©ë‹ˆë‹¤.

ì•„ë˜ì˜ (ë‹¨ìˆœí™”ëœ) ì˜ˆì œì—ì„œëŠ” `push_to_hub`ë¥¼ ë®ì–´ì¨ì„œ ëª¨ë“  PNG íŒŒì¼ì„ ë‹¨ì¼ ì•„ì¹´ì´ë¸Œì— ì••ì¶•í•˜ì—¬ Hubì˜ ë¦¬í¬ì§€í† ë¦¬ì— ê³¼ë¶€í•˜ê°€ ê±¸ë¦¬ëŠ” ê²ƒì„ ë°©ì§€í•©ë‹ˆë‹¤:.

```py
class ZipScheduler(CommitScheduler):
    def push_to_hub(self):
        # 1. PNG íŒŒì¼ë“¤ì„ ë‚˜ì—´í•©ë‹ˆë‹¤.
          png_files = list(self.folder_path.glob("*.png"))
          if len(png_files) == 0:
              return None  # ì»¤ë°‹í•  ê²ƒì´ ì—†ë‹¤ë©´ ì¼ì° ë¦¬í„´í•©ë‹ˆë‹¤.

        # 2. png íŒŒì¼ë“¤ì„ ë‹¨ì¼ Zip íŒŒì¼ë¡œ ì••ì¶•í•©ë‹ˆë‹¤.
        with tempfile.TemporaryDirectory() as tmpdir:
            archive_path = Path(tmpdir) / "train.zip"
            with zipfile.ZipFile(archive_path, "w", zipfile.ZIP_DEFLATED) as zip:
                for png_file in png_files:
                    zip.write(filename=png_file, arcname=png_file.name)

            # 3. ì••ì¶•ëœ íŒŒì¼ì„ ì—…ë¡œë“œ í•©ë‹ˆë‹¤.
            self.api.upload_file(..., path_or_fileobj=archive_path)

        # 4. ë¡œì»¬ png íŒŒì¼ì„ ì‚­ì œí•˜ì—¬ ë‹¤ìŒì— ë‹¤ì‹œ ì—…ë¡œë“œ ë˜ëŠ” ì¼ì„ ë°©ì§€í•©ë‹ˆë‹¤.
        for png_file in png_files:
            png_file.unlink()
```

`push_to_hub`ë¥¼ ë®ì–´ì“°ë©´ ë‹¤ìŒê³¼ ê°™ì€ [`CommitScheduler`]ì˜ ì†ì„±ì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
- [`HfApi`] í´ë¼ì´ì–¸íŠ¸: `api`
- í´ë” ë§¤ê°œë³€ìˆ˜: `folder_path` ë° `path_in_repo`
- ë¦¬í¬ì§€í† ë¦¬ ë§¤ê°œë³€ìˆ˜: `repo_id`, `repo_type`, `revision`
- ìŠ¤ë ˆë“œ ë½: `lock`

> [!TIP]
> ì‚¬ìš©ì ì •ì˜ ìŠ¤ì¼€ì¤„ëŸ¬ì˜ ë” ë§ì€ ì˜ˆì œëŠ” ì‚¬ìš© ì‚¬ë¡€ì— ë”°ë¥¸ ë‹¤ì–‘í•œ êµ¬í˜„ì´ í¬í•¨ëœ [ë°ëª¨ ìŠ¤í˜ì´ìŠ¤](https://huggingface.co/spaces/Wauplin/space_to_dataset_saver)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

### create_commit[[createcommit]]

[`upload_file`] ë° [`upload_folder`] í•¨ìˆ˜ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° í¸ë¦¬í•œ í•˜ì´ ë ˆë²¨ APIì…ë‹ˆë‹¤.
ë¡œìš° ë ˆë²¨ì—ì„œ ì‘ì—…í•  í•„ìš”ê°€ ì—†ë‹¤ë©´ ì´ í•¨ìˆ˜ë“¤ì„ ë¨¼ì € ì‚¬ìš©í•´ ë³¼ ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.
ë§Œì•½ ì»¤ë°‹ ë ˆë²¨ì—ì„œ ì‘ì—…í•˜ê³  ì‹¶ë‹¤ë©´ [`create_commit`] í•¨ìˆ˜ë¥¼ ì§ì ‘ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

[`create_commit`]ì´ ì§€ì›í•˜ëŠ” ì‘ì—… ìœ í˜•ì€ ì„¸ ê°€ì§€ì…ë‹ˆë‹¤:

- [`CommitOperationAdd`] ëŠ” íŒŒì¼ì„ Hubì— ì—…ë¡œë“œí•©ë‹ˆë‹¤. íŒŒì¼ì´ ì´ë¯¸ ìˆëŠ” ê²½ìš° íŒŒì¼ ë‚´ìš©ì„ ë®ì–´ì”ë‹ˆë‹¤. ì´ ì‘ì—…ì€ ë‘ ê°œì˜ ì¸ìˆ˜ë¥¼ ë°›ìŠµë‹ˆë‹¤:

  - `path_in_repo`: íŒŒì¼ì„ ì—…ë¡œë“œí•  ë¦¬í¬ì§€í† ë¦¬ ê²½ë¡œ.
  - `path_or_fileobj`: Hubì— ì—…ë¡œë“œí•  íŒŒì¼ì˜ íŒŒì¼ ì‹œìŠ¤í…œìƒ íŒŒì¼ ê²½ë¡œ ë˜ëŠ” íŒŒì¼ ìŠ¤íƒ€ì¼ ê°ì²´.

- [`CommitOperationDelete`]ëŠ” ë¦¬í¬ì§€í† ë¦¬ì—ì„œ íŒŒì¼ ë˜ëŠ” í´ë”ë¥¼ ì œê±°í•©ë‹ˆë‹¤. ì´ ì‘ì—…ì€ `path_in_repo`ë¥¼ ì¸ìˆ˜ë¡œ ë°›ìŠµë‹ˆë‹¤.

- [`CommitOperationCopy`]ëŠ” ë¦¬í¬ì§€í† ë¦¬ ë‚´ì˜ íŒŒì¼ì„ ë³µì‚¬í•©ë‹ˆë‹¤. ì´ ì‘ì—…ì€ ì„¸ ê°€ì§€ ì¸ìˆ˜ë¥¼ ë°›ìŠµë‹ˆë‹¤:

  - `src_path_in_repo`: ë³µì‚¬í•  íŒŒì¼ì˜ ë¦¬í¬ì§€í† ë¦¬ ê²½ë¡œ.
  - `path_in_repo`: íŒŒì¼ ë¶™ì—¬ë„£ê¸°ë¥¼ ìˆ˜í–‰í•  ë¦¬í¬ì§€í† ë¦¬ ê²½ë¡œ.
  - `src_revision`: ì„ íƒ ì‚¬í•­ - ë‹¤ë¥¸ ë¸Œëœì¹˜/ë¦¬ë¹„ì „ì—ì„œ íŒŒì¼ì„ ë³µì‚¬í•˜ë ¤ëŠ” ê²½ìš° í•„ìš”í•œ ë³µì‚¬í•  íŒŒì¼ì˜ ë¦¬ë¹„ì „.

ì˜ˆë¥¼ ë“¤ì–´, Hub ë¦¬í¬ì§€í† ë¦¬ì—ì„œ ë‘ ê°œì˜ íŒŒì¼ì„ ì—…ë¡œë“œí•˜ê³  í•œ ê°œì˜ íŒŒì¼ì„ ì‚­ì œí•˜ë ¤ëŠ” ê²½ìš°:

1. íŒŒì¼ì„ ì¶”ê°€í•˜ê±°ë‚˜ ì‚­ì œí•˜ê³  í´ë”ë¥¼ ì‚­ì œí•˜ê¸° ìœ„í•´ ì ì ˆí•œ `CommitOperation`ì„ ì‚¬ìš©í•©ë‹ˆë‹¤:

```py
>>> from huggingface_hub import HfApi, CommitOperationAdd, CommitOperationDelete
>>> api = HfApi()
>>> operations = [
...     CommitOperationAdd(path_in_repo="LICENSE.md", path_or_fileobj="~/repo/LICENSE.md"),
...     CommitOperationAdd(path_in_repo="weights.h5", path_or_fileobj="~/repo/weights-final.h5"),
...     CommitOperationDelete(path_in_repo="old-weights.h5"),
...     CommitOperationDelete(path_in_repo="logs/"),
...     CommitOperationCopy(src_path_in_repo="image.png", path_in_repo="duplicate_image.png"),
... ]
```

2. ì‘ì—…ì„ [`create_commit`]ì— ì „ë‹¬í•©ë‹ˆë‹¤:

```py
>>> api.create_commit(
...     repo_id="lysandre/test-model",
...     operations=operations,
...     commit_message="Upload my model weights and license",
... )
```

ë‹¤ìŒ í•¨ìˆ˜ë“¤ì€ [`upload_file`] ë° [`upload_folder`] ì™¸ì—ë„ ë‚´ë¶€ì ìœ¼ë¡œ [`create_commit`]ì„ ì‚¬ìš©í•©ë‹ˆë‹¤:

- [`delete_file`]ì€ Hubì˜ ë¦¬í¬ì§€í† ë¦¬ì—ì„œ ë‹¨ì¼ íŒŒì¼ì„ ì‚­ì œí•©ë‹ˆë‹¤.
- [`delete_folder`]ëŠ” Hubì˜ ë¦¬í¬ì§€í† ë¦¬ì—ì„œ ì „ì²´ í´ë”ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.
- [`metadata_update`]ëŠ” ë¦¬í¬ì§€í† ë¦¬ì˜ ë©”íƒ€ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.

ìì„¸í•œ ë‚´ìš©ì€ [`HfApi`] ì˜ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

### ì»¤ë°‹í•˜ê¸° ì „ì— LFS íŒŒì¼ ë¯¸ë¦¬ ì—…ë¡œë“œí•˜ê¸°[[preupload-lfs-files-before-commit]]

ê²½ìš°ì— ë”°ë¼ ì»¤ë°‹ í˜¸ì¶œì„ **í•˜ê¸° ì „ì—** ëŒ€ìš©ëŸ‰ íŒŒì¼ì„ S3ì— ì—…ë¡œë“œí•´ì•¼ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
ì˜ˆë¥¼ ë“¤ì–´ ì¸ë©”ëª¨ë¦¬ì— ìƒì„±ëœ ì—¬ëŸ¬ ê°œì˜ ìƒ¤ë“œì— ìˆëŠ” ë°ì´í„° ì„¸íŠ¸ë¥¼ ì»¤ë°‹í•˜ëŠ” ê²½ìš°, ìƒ¤ë“œë¥¼ í•˜ë‚˜ì”© ì—…ë¡œë“œí•´ì•¼ ë©”ëª¨ë¦¬ ë¶€ì¡± ë¬¸ì œë¥¼ í”¼í•  ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.
ì´ ë¬¸ì œì— ëŒ€í•œ í•´ê²°ì±…ì€ ê° ìƒ¤ë“œë¥¼ ë¦¬í¬ì§€í† ë¦¬ì— ë³„ë„ì˜ ì»¤ë°‹ìœ¼ë¡œ ì—…ë¡œë“œí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.
ì´ ë°©ë²•ì€ ì™„ë²½í•˜ê²Œ ìœ íš¨í•˜ì§€ë§Œ, ìˆ˜ì‹­ ê°œì˜ ì»¤ë°‹ì„ ìƒì„±í•˜ì—¬ ì ì¬ì ìœ¼ë¡œ git íˆìŠ¤í† ë¦¬ë¥¼ ì—‰ë§ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ìˆë‹¤ëŠ” ë‹¨ì ì´ ìˆìŠµë‹ˆë‹¤.
ì´ ë¬¸ì œë¥¼ ê·¹ë³µí•˜ê¸° ìœ„í•´ íŒŒì¼ì„ í•˜ë‚˜ì”© S3ì— ì—…ë¡œë“œí•œ ë‹¤ìŒ ë§ˆì§€ë§‰ì— í•˜ë‚˜ì˜ ì»¤ë°‹ì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì´ëŠ” [`preupload_lfs_files`]ì™€ [`create_commit`]ì„ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.

> [!WARNING]
> ì´ ë°©ë²•ì€ ê³ ê¸‰ ì‚¬ìš©ìë¥¼ ìœ„í•œ ë°©ì‹ì…ë‹ˆë‹¤.
> ì‚¬ì „ì— íŒŒì¼ì„ ë¯¸ë¦¬ ì—…ë¡œë“œí•˜ëŠ” ë¡œìš° ë ˆë²¨ ë¡œì§ì„ ì²˜ë¦¬í•˜ëŠ” ëŒ€ì‹  [`upload_file`], [`upload_folder`] ë˜ëŠ” [`create_commit`]ì„ ì§ì ‘ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ëŒ€ë¶€ë¶„ì˜ ê²½ìš°ì— ì í•©í•©ë‹ˆë‹¤.
> [`preupload_lfs_files`]ì˜ ì£¼ìš” ì£¼ì˜ ì‚¬í•­ì€ ì»¤ë°‹ì´ ì‹¤ì œë¡œ ì´ë£¨ì–´ì§ˆ ë•Œê¹Œì§€ëŠ” Hubì˜ ë¦¬í¬ì§€í† ë¦¬ì—ì„œ ì—…ë¡œë“œ íŒŒì¼ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ì—†ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.
> ê¶ê¸ˆí•œ ì ì´ ìˆìœ¼ë©´ ì–¸ì œë“ ì§€ Discordë‚˜ GitHub ì´ìŠˆë¡œ ë¬¸ì˜í•´ ì£¼ì„¸ìš”.

ë‹¤ìŒì€ íŒŒì¼ì„ ë¯¸ë¦¬ ì—…ë¡œë“œí•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ì£¼ëŠ” ê°„ë‹¨í•œ ì˜ˆì‹œì…ë‹ˆë‹¤:

```py
>>> from huggingface_hub import CommitOperationAdd, preupload_lfs_files, create_commit, create_repo

>>> repo_id = create_repo("test_preupload").repo_id

>>> operations = [] # ìƒì„±ë  ëª¨ë“  `CommitOperationAdd` ê°ì²´ë¥¼ ë‚˜ì—´í•©ë‹ˆë‹¤.
>>> for i in range(5):
...     content = ... # bin ìë£Œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
...     addition = CommitOperationAdd(path_in_repo=f"shard_{i}_of_5.bin", path_or_fileobj=content)
...     preupload_lfs_files(repo_id, additions=[addition])
...     operations.append(addition)

>>> # ì»¤ë°‹ì„ ìƒì„±í•©ë‹ˆë‹¤.
>>> create_commit(repo_id, operations=operations, commit_message="Commit all shards")
```

ë¨¼ì €, [`CommitOperationAdd`] ì˜¤ë¸Œì íŠ¸ë¥¼ í•˜ë‚˜ì”© ìƒì„±í•©ë‹ˆë‹¤. ì‹¤ì „ì„ ìƒì •í•œ ì˜ˆì œì—ì„œëŠ”, ì—¬ê¸°ì— ìƒì„±ëœ ìƒ¤ë“œë¥¼ í¬í•¨í•©ë‹ˆë‹¤.
ê° íŒŒì¼ì€ ë‹¤ìŒ íŒŒì¼ì„ ìƒì„±í•˜ê¸° ì „ì— ì—…ë¡œë“œë©ë‹ˆë‹¤.
[`preupload_lfs_files`] ë‹¨ê³„ì—ì„œëŠ” **`CommitOperationAdd` ì˜¤ë¸Œì íŠ¸ê°€ ë³€ê²½ë©ë‹ˆë‹¤.** ë”°ë¼ì„œ[`create_commit`]ì— ì§ì ‘ ì „ë‹¬í•  ë•Œë§Œ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
ì˜¤ë¸Œì íŠ¸ì˜ ì£¼ìš” ì—…ë°ì´íŠ¸ëŠ” **ë°”ì´ë„ˆë¦¬ ì½˜í…ì¸ ê°€ ì œê±°**ëœë‹¤ëŠ” ê²ƒì¸ë°, ì´ëŠ” ë”°ë¡œ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ì €ì¥í•˜ì§€ ì•Šìœ¼ë©´ ê°€ë¹„ì§€ ì½œë ‰íŒ… ë¨ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì´ë¯¸ ì—…ë¡œë“œëœ ì½˜í…ì¸ ë¥¼ ë©”ëª¨ë¦¬ìƒì— ë‚¨ê¸°ê³  ì‹¶ì§€ ì•Šê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
ë§ˆì§€ë§‰ìœ¼ë¡œ ëª¨ë“  ì‘ì—…ì„ [`create_commit`]ì— ì „ë‹¬í•˜ì—¬ ì»¤ë°‹ì„ ìƒì„±í•©ë‹ˆë‹¤.
ì•„ì§ ì²˜ë¦¬ë˜ì§€ ì•Šì€ ì¶”ê°€ ì‘ì—…(ì¶”ê°€, ì‚­ì œ ë˜ëŠ” ë³µì‚¬)ë„ ì „ë‹¬í•˜ë©´ ì˜¬ë°”ë¥´ê²Œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

## ëŒ€ìš©ëŸ‰ ì—…ë¡œë“œë¥¼ ìœ„í•œ íŒê³¼ ìš”ë ¹[[tips-and-tricks-for-large-uploads]]

ë¦¬í¬ì§€í† ë¦¬ì— ìˆëŠ” ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•  ë•Œ ì£¼ì˜í•´ì•¼ í•  ëª‡ ê°€ì§€ ì œí•œ ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤.
ë°ì´í„°ë¥¼ ìŠ¤íŠ¸ë¦¬ë°í•˜ëŠ” ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì„ ê³ ë ¤í•˜ë©´, í”„ë¡œì„¸ìŠ¤ ë§ˆì§€ë§‰ì— ì—…ë¡œë“œ/í‘¸ì‹œê°€ ì‹¤íŒ¨í•˜ê±°ë‚˜ hf.coì—ì„œ ë˜ëŠ” ë¡œì»¬ì—ì„œ ì‘ì—…í•  ë•Œ ì„±ëŠ¥ ì €í•˜ê°€ ë°œìƒí•˜ëŠ” ê²ƒì€ ë§¤ìš° ì„±ê°€ì‹  ì¼ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Hubì—ì„œ ë¦¬í¬ì§€í† ë¦¬ë¥¼ êµ¬ì„±í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ëª¨ë²” ì‚¬ë¡€ëŠ” [ë¦¬í¬ì§€í† ë¦¬ ì œí•œ ì‚¬í•­ ë° ê¶Œì¥ ì‚¬í•­](https://huggingface.co/docs/hub/repositories-recommendations) ê°€ì´ë“œë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.
ë‹¤ìŒìœ¼ë¡œ ì—…ë¡œë“œ í”„ë¡œì„¸ìŠ¤ë¥¼ ìµœëŒ€í•œ ì›í™œí•˜ê²Œ ì§„í–‰í•  ìˆ˜ ìˆëŠ” ëª‡ ê°€ì§€ ì‹¤ìš©ì ì¸ íŒì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

- **ì‘ê²Œ ì‹œì‘í•˜ì„¸ìš”**: ì—…ë¡œë“œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ í…ŒìŠ¤íŠ¸í•  ë•ŒëŠ” ì†ŒëŸ‰ì˜ ë°ì´í„°ë¡œ ì‹œì‘í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ì†ŒëŸ‰ì˜ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ”ë° ì ì€ ì‹œê°„ì´ ë“¤ê¸° ë•Œë¬¸ì— ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë°˜ë³µí•˜ëŠ” ê²ƒì´ ë” ì‰½ìŠµë‹ˆë‹¤.
- **ì‹¤íŒ¨ë¥¼ ì˜ˆìƒí•˜ì„¸ìš”**: ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ ìŠ¤íŠ¸ë¦¬ë°í•˜ëŠ” ê²ƒì€ ì–´ë ¤ìš´ ì¼ì…ë‹ˆë‹¤. ì–´ë–¤ ì¼ì´ ì¼ì–´ë‚ ì§€ ì•Œ ìˆ˜ ì—†ì§€ë§Œ, í•­ìƒ ì»´í“¨í„°, ì—°ê²°, ì„œë²„ ë“± ì–´ë–¤ ì´ìœ ë¡œë“  í•œ ë²ˆì¯¤ì€ ì‹¤íŒ¨í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì„ ê³ ë ¤í•˜ëŠ” ê²ƒì´ ê°€ì¥ ì¢‹ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë§ì€ ì–‘ì˜ íŒŒì¼ì„ ì—…ë¡œë“œí•  ê³„íšì´ë¼ë©´ ë‹¤ìŒ íŒŒì¼ì„ ì—…ë¡œë“œí•˜ê¸° ì „ì— ì´ë¯¸ ì—…ë¡œë“œí•œ íŒŒì¼ì„ ë¡œì»¬ì—ì„œ ì¶”ì í•˜ëŠ” ê²ƒì´ ê°€ì¥ ì¢‹ìŠµë‹ˆë‹¤. ì´ë¯¸ ì»¤ë°‹ëœ LFS íŒŒì¼ì€ ì ˆëŒ€ ë‘ ë²ˆ ë‹¤ì‹œ ì—…ë¡œë“œë˜ì§€ ì•Šì§€ë§Œ í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ ì´ë¥¼ í™•ì¸í•˜ë©´ ì‹œê°„ì„ ì ˆì•½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **`hf_transfer`ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”**: [`hf_transfer`](https://github.com/huggingface/hf_transfer)ëŠ” ëŒ€ì—­í­ì´ ë§¤ìš° ë†’ì€ ì»´í“¨í„°ì—ì„œ ì—…ë¡œë“œ ì†ë„ë¥¼ ë†’ì´ê¸° ìœ„í•œ Rust ê¸°ë°˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤. `hf_transfer`ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´:

    1. `huggingface_hub`ë¥¼ ì„¤ì¹˜í•  ë•Œ `hf_transfer`ë¥¼ ì¶”ê°€ë¡œ ì§€ì •í•©ë‹ˆë‹¤.
       (ì˜ˆ: `pip install huggingface_hub[hf_transfer]`).
    2. í™˜ê²½ ë³€ìˆ˜ë¡œ `HF_HUB_ENABLE_HF_TRANSFER=1`ì„ ì„¤ì •í•©ë‹ˆë‹¤.

> [!WARNING]
> `hf_transfer`ëŠ” ê³ ê¸‰ ì‚¬ìš©ì ë„êµ¬ì…ë‹ˆë‹¤!
> í…ŒìŠ¤íŠ¸ ë° í”„ë¡œë•ì…˜ ì¤€ë¹„ê°€ ì™„ë£Œë˜ì—ˆì§€ë§Œ, ê³ ê¸‰ ì˜¤ë¥˜ ì²˜ë¦¬ë‚˜ í”„ë¡ì‹œì™€ ê°™ì€ ì‚¬ìš©ì ì¹œí™”ì ì¸ ê¸°ëŠ¥ì´ ë¶€ì¡±í•©ë‹ˆë‹¤.
> ìì„¸í•œ ë‚´ìš©ì€ [ì´ ì„¹ì…˜](https://huggingface.co/docs/huggingface_hub/hf_transfer)ì„ ì°¸ì¡°í•˜ì„¸ìš”.
